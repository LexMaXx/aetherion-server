# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–Ω–∞—Ä—è–¥–æ–≤ - –ì–û–¢–û–í–û

## –ü—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞:**
```
[PlayerAttackNew] –£ –ø—Ä–µ—Ñ–∞–±–∞ —Å–Ω–∞—Ä—è–¥–∞ –Ω–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Projectile!
[CelestialProjectile] –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Å–Ω–∞—Ä—è–¥–∞ - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–ª —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Projectile`, –Ω–æ `CelestialProjectile` –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –Ω–µ–≥–æ - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å.

---

## –†–µ—à–µ–Ω–∏–µ

### –î–æ:
```csharp
Projectile projectile = projectileObj.GetComponent<Projectile>();
if (projectile != null) {
    projectile.Initialize(...);
} else {
    Debug.LogError("–£ –ø—Ä–µ—Ñ–∞–±–∞ —Å–Ω–∞—Ä—è–¥–∞ –Ω–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Projectile!");
}
```

### –ü–æ—Å–ª–µ:
```csharp
// –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Å–Ω–∞—Ä—è–¥–æ–≤
CelestialProjectile celestialProj = projectileObj.GetComponent<CelestialProjectile>();
ArrowProjectile arrowProj = projectileObj.GetComponent<ArrowProjectile>();
Projectile baseProj = projectileObj.GetComponent<Projectile>();

if (celestialProj != null)
{
    celestialProj.Initialize(targetTransform, damage, direction, gameObject);
    Debug.Log($"[PlayerAttackNew] üéØ CelestialProjectile —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!");
}
else if (arrowProj != null)
{
    arrowProj.Initialize(targetTransform, damage, direction, gameObject);
    Debug.Log($"[PlayerAttackNew] üéØ ArrowProjectile —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!");
}
else if (baseProj != null)
{
    baseProj.Initialize(targetTransform, damage, direction, gameObject);
    Debug.Log($"[PlayerAttackNew] üéØ Projectile —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!");
}
else
{
    Debug.LogError("[PlayerAttackNew] –£ –ø—Ä–µ—Ñ–∞–±–∞ —Å–Ω–∞—Ä—è–¥–∞ –Ω–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Projectile/CelestialProjectile/ArrowProjectile!");
    Destroy(projectileObj);
}
```

---

## –§–∞–π–ª

**–ü—É—Ç—å:** `Assets/Scripts/Player/PlayerAttackNew.cs`
**–ú–µ—Ç–æ–¥:** `SpawnProjectile(float damage)` (—Å—Ç—Ä–æ–∫–∏ 333-392)

---

## –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

1. ‚úÖ **CelestialProjectile** (Celestial Ball - –ú–∞–≥)
2. ‚úÖ **ArrowProjectile** (–°—Ç—Ä–µ–ª—ã - –õ—É—á–Ω–∏–∫)
3. ‚úÖ **Projectile** (–ë–∞–∑–æ–≤—ã–µ —Å–Ω–∞—Ä—è–¥—ã)

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Å–Ω–∞—Ä—è–¥–∞ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ Initialize().

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ü–µ–Ω—É
```
Assets/Scenes/ArenaMultiplayer.unity
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ù–∞–π–¥–∏—Ç–µ **TestPlayer** (–∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ú–∞–≥–∞) –≤ Hierarchy:

```
Inspector ‚Üí Player Attack New (Script)
‚îú‚îÄ‚îÄ Attack Config: BasicAttackConfig_Mage
‚îî‚îÄ‚îÄ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω!)
```

–û—Ç–∫—Ä–æ–π—Ç–µ **BasicAttackConfig_Mage** –≤ Project:

```
Inspector ‚Üí BasicAttackConfig_Mage
‚îú‚îÄ‚îÄ Attack Type: Ranged
‚îú‚îÄ‚îÄ Projectile Prefab: CelestialBallProjectile
‚îú‚îÄ‚îÄ Attack Range: 50 (–∏–ª–∏ –±–æ–ª—å—à–µ)
‚îî‚îÄ‚îÄ Base Damage: 40
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É
```
1. –ù–∞–∂–º–∏—Ç–µ Play ‚ñ∂Ô∏è
2. –ù–∞–∂–º–∏—Ç–µ –õ–ö–ú –¥–ª—è –∞—Ç–∞–∫–∏
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Console

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
[PlayerAttackNew] –ù–∞–π–¥–µ–Ω–æ DummyEnemy: 5
[PlayerAttackNew] ‚úÖ –¶–µ–ª—å –Ω–∞–π–¥–µ–Ω–∞: DummyEnemy_3 –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 20.8m
[PlayerAttackNew] ‚öîÔ∏è –ê—Ç–∞–∫–∞!
[PlayerAttackNew] üí• –£—Ä–æ–Ω —Ä–∞—Å—Å—á–∏—Ç–∞–Ω: 40.0
[PlayerAttackNew] üéØ CelestialProjectile —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!
[CelestialProjectile] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω! –¶–µ–ª—å: DummyEnemy_3
[DummyEnemy] DummyEnemy_3 –ø–æ–ª—É—á–∏–ª 40.0 —É—Ä–æ–Ω–∞. HP: 960/1000
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω–æ

- ‚úÖ –°–Ω–∞—Ä—è–¥ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º
- ‚úÖ –°–Ω–∞—Ä—è–¥ –ª–µ—Ç–∏—Ç –∫ DummyEnemy
- ‚úÖ –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏:
  - –°–Ω–∞—Ä—è–¥ –∏—Å—á–µ–∑–∞–µ—Ç
  - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
  - HP bar DummyEnemy —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç —Ü–µ–ª–∏ –¥–ª—è –∞—Ç–∞–∫–∏"
**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DummyEnemy –µ—Å—Ç—å –≤ —Å—Ü–µ–Ω–µ
2. –£–≤–µ–ª–∏—á—å—Ç–µ Attack Range –≤ BasicAttackConfig_Mage –¥–æ 50m

### –ü—Ä–æ–±–ª–µ–º–∞: "–¶–µ–ª—å —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ"
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ BasicAttackConfig_Mage
2. –£–≤–µ–ª–∏—á—å—Ç–µ Attack Range (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 100m)

### –ü—Ä–æ–±–ª–µ–º–∞: "Projectile Prefab –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ BasicAttackConfig_Mage
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ `CelestialBallProjectile` –≤ –ø–æ–ª–µ Projectile Prefab

### –ü—Ä–æ–±–ª–µ–º–∞: –°–Ω–∞—Ä—è–¥ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ –Ω–µ –ª–µ—Ç–∏—Ç
**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
[PlayerAttackNew] üéØ CelestialProjectile —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "–£ –ø—Ä–µ—Ñ–∞–±–∞ —Å–Ω–∞—Ä—è–¥–∞ –Ω–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞...", –∑–Ω–∞—á–∏—Ç:
- –£ –ø—Ä–µ—Ñ–∞–±–∞ CelestialBallProjectile –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç CelestialProjectile
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –ø—Ä–µ—Ñ–∞–±

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ —Å –ú–∞–≥–æ–º:

1. **–°–æ–∑–¥–∞—Ç—å BasicAttackConfig –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤:**
   - Warrior (Melee, –±–µ–∑ —Å–Ω–∞—Ä—è–¥–æ–≤)
   - Archer (Ranged, ArrowProjectile)
   - Paladin (Melee, –±–µ–∑ —Å–Ω–∞—Ä—è–¥–æ–≤)
   - Rogue/Necromancer (Ranged, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–Ω–∞—Ä—è–¥—ã)

2. **–ó–∞–º–µ–Ω–∏—Ç—å PlayerAttack –Ω–∞ PlayerAttackNew** –Ω–∞ –≤—Å–µ—Ö –ø—Ä–µ—Ñ–∞–±–∞—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä** - —É—Ä–æ–Ω –¥–æ–ª–∂–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ combatSync

4. **–î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
   - Weapon glow –≤–æ –≤—Ä–µ–º—è –∞—Ç–∞–∫–∏
   - Muzzle flash —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–Ω–∞—Ä—è–¥–∞
   - Hit effects –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—É—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Ç–∞–∫–∏:

1. **Input (–õ–ö–ú)** ‚Üí `Update()` ‚Üí `TryAttack()`
2. **Target Check** ‚Üí `GetEnemyTarget()` / `GetDummyTarget()`
3. **Range Check** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏
4. **Mana Check** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–Ω—ã (–¥–ª—è –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫)
5. **Execute** ‚Üí `PerformAttack(targetTransform)`
6. **Animation** ‚Üí Animator.SetTrigger("Attack")
7. **Delayed Damage** ‚Üí `Invoke("DealDamage", 0.3f)`
8. **Calculate** ‚Üí `attackConfig.CalculateDamage(stats)`
9. **Spawn Projectile** ‚Üí `SpawnProjectile(damage)`
10. **Initialize** ‚Üí `celestialProj.Initialize(...)`
11. **Fly & Hit** ‚Üí CelestialProjectile –ª–µ—Ç–∏—Ç –∏ –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —Å–Ω–∞—Ä—è–¥–æ–≤:

```csharp
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø–æ—Ä—è–¥–∫–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç–∏:
1. CelestialProjectile  // –°–∞–º—ã–π —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π (Celestial Ball)
2. ArrowProjectile      // –°—Ä–µ–¥–Ω–∏–π (—Å—Ç—Ä–µ–ª—ã –ª—É—á–Ω–∏–∫–∞)
3. Projectile          // –ë–∞–∑–æ–≤—ã–π (–æ–±—â–∏–µ —Å–Ω–∞—Ä—è–¥—ã)
```

---

## –°—Ç–∞—Ç—É—Å

‚úÖ **–ì–û–¢–û–í–û** - SpawnProjectile –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
‚úÖ **–§–ê–ô–õ:** PlayerAttackNew.cs –æ–±–Ω–æ–≤–ª—ë–Ω
‚úÖ **–ö–û–ú–ü–ò–õ–Ø–¶–ò–Ø:** –ë–µ–∑ –æ—à–∏–±–æ–∫

üìã **TODO NEXT:**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å CelestialBallProjectile
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É—Ä–æ–Ω –¥–æ—Ö–æ–¥–∏—Ç –¥–æ DummyEnemy
- –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–µ—Ñ–∞–±—ã

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã - –ø–æ–∫–∞–∂–∏—Ç–µ:
1. –°–∫—Ä–∏–Ω—à–æ—Ç Inspector (PlayerAttackNew + BasicAttackConfig_Mage)
2. –°–∫—Ä–∏–Ω—à–æ—Ç Console –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –õ–ö–ú
3. –û–ø–∏—à–∏—Ç–µ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ
