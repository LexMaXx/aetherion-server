# –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Å–∫–∏–ª–ª—ã (SkillConfig) üîÑ

## –ü—Ä–æ–±–ª–µ–º–∞

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- SkillManager –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `List<SkillData>` (—Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞)
- SkillExecutor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SkillConfig` (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞) ‚úÖ
- ArenaManager –∑–∞–≥—Ä—É–∂–∞–µ—Ç SkillData —á–µ—Ä–µ–∑ SkillDatabase (—Å—Ç–∞—Ä–∞—è)

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- SkillManager –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `List<SkillConfig>` (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- –£–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç SkillDatabase (—Å—Ç–∞—Ä–∞—è)
- –ó–∞–≥—Ä—É–∂–∞—Ç—å —Å–∫–∏–ª–ª—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Resources –ø–æ skillId

---

## –†–µ—à–µ–Ω–∏–µ: –£–ø—Ä–æ—Å—Ç–∏—Ç—å SkillManager

**–ò–¥–µ—è:** SkillManager –ù–ï –Ω—É–∂–µ–Ω! SkillExecutor –£–ñ–ï —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∫–∏–ª–ª–∞–º–∏!

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
SkillManager (—Å—Ç–∞—Ä–∞—è) ‚Üí SkillData ‚Üí –ù–ï –†–ê–ë–û–¢–ê–ï–¢
      ‚Üì
SkillExecutor (–Ω–æ–≤–∞—è) ‚Üí SkillConfig ‚Üí –†–ê–ë–û–¢–ê–ï–¢ ‚úÖ
```

**–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
SkillExecutor ‚Üí SkillConfig (–Ω–∞–ø—Ä—è–º—É—é) ‚úÖ
```

---

## –ß—Ç–æ –¥–µ–ª–∞–µ–º

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–¥–∞–ª–∏—Ç—å SkillManager (–†–ê–î–ò–ö–ê–õ–¨–ù–û)

**–ü–ª—é—Å—ã:**
- –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–ø—Ä–æ—â–∞–µ–º –∫–æ–¥
- SkillExecutor —É–∂–µ –≤—Å—ë –¥–µ–ª–∞–µ—Ç

**–ú–∏–Ω—É—Å—ã:**
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å ArenaManager
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å Character Selection
- –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å UI

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å SkillManager –¥–ª—è SkillConfig (–ë–ï–ó–û–ü–ê–°–ù–û)

**–ü–ª—é—Å—ã:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ù–µ –ª–æ–º–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

**–ú–∏–Ω—É—Å—ã:**
- SkillManager —Å—Ç–∞–Ω–µ—Ç wrapper –Ω–∞–¥ SkillExecutor

---

## –í–´–ë–ò–†–ê–ï–ú –í–ê–†–ò–ê–ù–¢ 2 (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π)

### –®–∞–≥ 1: –ò–∑–º–µ–Ω–∏—Ç—å SkillManager

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```csharp
// –ë–´–õ–û:
public List<SkillData> equippedSkills;
public List<SkillData> allAvailableSkills;

// –°–¢–ê–õ–û:
public List<SkillConfig> equippedSkills;
public List<SkillConfig> allAvailableSkills;
```

**–ú–µ—Ç–æ–¥—ã:**
```csharp
public void LoadEquippedSkills(List<int> skillIds)
{
    equippedSkills.Clear();

    foreach (int skillId in skillIds)
    {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º SkillConfig –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Resources
        SkillConfig skill = LoadSkillConfigById(skillId);
        if (skill != null)
        {
            equippedSkills.Add(skill);
        }
    }
}

private SkillConfig LoadSkillConfigById(int skillId)
{
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç—å –ø–æ skillId
    string path = GetSkillPathById(skillId);
    return Resources.Load<SkillConfig>(path);
}

private string GetSkillPathById(int skillId)
{
    // Warrior: 101-105
    if (skillId >= 101 && skillId <= 105)
    {
        switch (skillId)
        {
            case 101: return "Skills/Warrior_BattleRage";
            case 102: return "Skills/Warrior_DefensiveStance";
            case 103: return "Skills/Warrior_HammerThrow";
            case 104: return "Skills/Warrior_BattleHeal";
            case 105: return "Skills/Warrior_Charge";
        }
    }

    // Mage: 201-205
    // ... –∏ —Ç.–¥.
}
```

---

### –®–∞–≥ 2: –ò–∑–º–µ–Ω–∏—Ç—å ArenaManager.LoadSkillsForClass()

**–ë–´–õ–û:**
```csharp
private void LoadSkillsForClass(SkillManager skillManager)
{
    SkillDatabase db = SkillDatabase.Instance;
    // ... load from SkillDatabase
}
```

**–°–¢–ê–õ–û:**
```csharp
private void LoadSkillsForClass(SkillManager skillManager)
{
    string selectedClass = PlayerPrefs.GetString("SelectedCharacterClass", "");

    // –ü–æ–ª—É—á–∞–µ–º skillIds –¥–ª—è –∫–ª–∞—Å—Å–∞
    int[] skillIds = GetSkillIdsForClass(selectedClass);

    // –ó–∞–≥—Ä—É–∂–∞–µ–º SkillConfig –Ω–∞–ø—Ä—è–º—É—é
    List<SkillConfig> skills = new List<SkillConfig>();
    foreach (int skillId in skillIds)
    {
        SkillConfig skill = LoadSkillConfigById(skillId);
        if (skill != null)
        {
            skills.Add(skill);
        }
    }

    skillManager.allAvailableSkills = skills;
}

private int[] GetSkillIdsForClass(string characterClass)
{
    switch (characterClass)
    {
        case "Warrior": return new int[] { 101, 102, 103, 104, 105 };
        case "Mage": return new int[] { 201, 202, 203, 204, 205 };
        case "Archer": return new int[] { 301, 302, 303, 304, 305 };
        case "Necromancer": return new int[] { 601, 602, 603, 604, 605 };
        case "Paladin": return new int[] { 501, 502, 503, 504, 505 };
        default: return new int[0];
    }
}
```

---

### –®–∞–≥ 3: –ò–∑–º–µ–Ω–∏—Ç—å LoadEquippedSkillsFromPlayerPrefs()

**–ë–´–õ–û:**
```csharp
private void LoadEquippedSkillsFromPlayerPrefs(SkillManager skillManager)
{
    // ... load 3 skills
    for (int i = 0; i < Math.Min(3, skillManager.allAvailableSkills.Count); i++)
}
```

**–°–¢–ê–õ–û:**
```csharp
private void LoadEquippedSkillsFromPlayerPrefs(SkillManager skillManager)
{
    // ... load 5 skills
    for (int i = 0; i < Math.Min(5, skillManager.allAvailableSkills.Count); i++)
    {
        skillManager.equippedSkills.Add(skillManager.allAvailableSkills[i]);
    }

    Debug.Log($"[ArenaManager] ‚úÖ –ê–≤—Ç–æ—ç–∫–∏–ø–∏—Ä–æ–≤–∞–Ω–æ {skillManager.equippedSkills.Count} —Å–∫–∏–ª–ª–æ–≤");
}
```

---

### –®–∞–≥ 4: –°–≤—è–∑–∞—Ç—å SkillManager –∏ SkillExecutor

**–ü—Ä–æ–±–ª–µ–º–∞:** SkillExecutor –£–ñ–ï —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∫–∏–ª–ª–∞–º–∏, –Ω–æ SkillManager —Ç–æ–∂–µ!

**–†–µ—à–µ–Ω–∏–µ:** SkillManager –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–∫–∏–ª–ª—ã –≤ SkillExecutor

**–í ArenaManager –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫–∏–ª–ª–æ–≤:**
```csharp
private void SpawnSelectedCharacter()
{
    // ... spawn character ...

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫–∏–ª–ª—ã –≤ SkillManager
    LoadSkillsForClass(skillManager);
    LoadEquippedSkillsFromPlayerPrefs(skillManager);

    // –î–û–ë–ê–í–ò–¢–¨: –ü–µ—Ä–µ–¥–∞—ë–º —Å–∫–∏–ª–ª—ã –≤ SkillExecutor
    SkillExecutor skillExecutor = spawnedCharacter.GetComponent<SkillExecutor>();
    if (skillExecutor != null)
    {
        // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º 5 —Å–∫–∏–ª–ª–æ–≤ –ø–æ —Å–ª–æ—Ç–∞–º 1-5
        for (int i = 0; i < skillManager.equippedSkills.Count && i < 5; i++)
        {
            skillExecutor.SetSkill(i + 1, skillManager.equippedSkills[i]); // –°–ª–æ—Ç 1-5
        }

        Debug.Log($"[ArenaManager] ‚úÖ –°–∫–∏–ª–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ SkillExecutor");
    }
}
```

**SkillExecutor.SetSkill():**
```csharp
// –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ SkillExecutor:
public void SetSkill(int slotNumber, SkillConfig skill)
{
    if (slotNumber < 1 || slotNumber > 5)
    {
        Debug.LogError($"[SkillExecutor] Invalid slot number: {slotNumber}");
        return;
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Dictionary –∏–ª–∏ Array
    equippedSkills[slotNumber] = skill;
    Debug.Log($"[SkillExecutor] –°–∫–∏–ª–ª {skill.skillName} –∑–∞–≥—Ä—É–∂–µ–Ω –≤ —Å–ª–æ—Ç {slotNumber}");
}
```

---

## –ò—Ç–æ–≥–æ: 4 —Ñ–∞–π–ª–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. ‚úÖ **SkillManager.cs** - –∏–∑–º–µ–Ω–∏—Ç—å `SkillData` –Ω–∞ `SkillConfig`
2. ‚úÖ **ArenaManager.cs** - LoadSkillsForClass() + LoadEquippedSkillsFromPlayerPrefs()
3. ‚úÖ **SkillExecutor.cs** - –¥–æ–±–∞–≤–∏—Ç—å SetSkill() –º–µ—Ç–æ–¥
4. ‚úÖ **–°–æ–∑–¥–∞—Ç—å SkillConfigLoader.cs** (helper –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ skillId)

---

## –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- –®–∞–≥ 1 (SkillManager): ~30 –º–∏–Ω—É—Ç
- –®–∞–≥ 2 (ArenaManager): ~20 –º–∏–Ω—É—Ç
- –®–∞–≥ 3 (SkillExecutor): ~10 –º–∏–Ω—É—Ç
- –®–∞–≥ 4 (SkillConfigLoader): ~20 –º–∏–Ω—É—Ç
- **–ò–¢–û–ì–û:** ~1.5 —á–∞—Å–∞

---

## –ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å? üöÄ

**–ù–∞—á–∏–Ω–∞–µ–º —Å:**
1. –°–æ–∑–¥–∞—Ç—å SkillConfigLoader.cs (helper class)
2. –ò–∑–º–µ–Ω–∏—Ç—å SkillManager.cs
3. –ò–∑–º–µ–Ω–∏—Ç—å ArenaManager.cs
4. –î–æ–±–∞–≤–∏—Ç—å SetSkill() –≤ SkillExecutor.cs
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!
