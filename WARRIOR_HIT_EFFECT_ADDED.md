# ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Hit Effect –¥–ª—è –í–æ–∏–Ω–∞ (–±–ª–∏–∂–Ω–∏–π –±–æ–π)

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. **–ù–∞–∑–Ω–∞—á–µ–Ω —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ BasicAttackConfig_Warrior**

```yaml
hitEffectPrefab: CFXR3 Hit Leaves A (Lit)
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –ò—Å–∫—Ä—ã –æ—Ç —É–¥–∞—Ä–∞ –º–µ—á–∞ ‚ö°

**–ü—É—Ç—å:** `Assets/Resources/Effects/CFXR3 Hit Leaves A (Lit).prefab`

---

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤ PlayerAttackNew.ApplyDamage()**

#### –ë—ã–ª–æ:
```csharp
void ApplyDamage(float damage)
{
    Enemy enemy = GetEnemyTarget();
    if (enemy != null)
    {
        enemy.TakeDamage(damage);
        return; // ‚ùå –ù–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞!
    }

    DummyEnemy dummy = GetDummyTarget();
    if (dummy != null)
    {
        dummy.TakeDamage(damage);
        // ‚ùå –ù–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞!
    }
}
```

#### –°—Ç–∞–ª–æ:
```csharp
void ApplyDamage(float damage)
{
    Transform targetTransform = null;

    Enemy enemy = GetEnemyTarget();
    if (enemy != null)
    {
        enemy.TakeDamage(damage);
        targetTransform = enemy.transform; // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é
    }
    else
    {
        DummyEnemy dummy = GetDummyTarget();
        if (dummy != null)
        {
            dummy.TakeDamage(damage);
            targetTransform = dummy.transform; // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é
        }
    }

    // ‚úÖ –°–æ–∑–¥–∞—ë–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è
    if (targetTransform != null && attackConfig.hitEffectPrefab != null)
    {
        Vector3 hitPosition = targetTransform.position + Vector3.up * 1f;
        GameObject hitEffect = Instantiate(attackConfig.hitEffectPrefab, hitPosition, Quaternion.identity);
        Destroy(hitEffect, 2f);
        Debug.Log($"[PlayerAttackNew] üí• –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω: {attackConfig.hitEffectPrefab.name}");
    }
}
```

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –î–ª—è –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è (Warrior):

```
1. –ù–∞–∂–∞–ª–∏ –õ–ö–ú
2. TryAttack() ‚Üí PerformAttack()
3. –ß–µ—Ä–µ–∑ 0.5 —Å–µ–∫ ‚Üí DealDamage()
4. attackType == Melee ‚Üí ApplyDamage(damage)
5. enemy.TakeDamage(damage) ‚Üê —É—Ä–æ–Ω –Ω–∞–Ω–µ—Å—ë–Ω
6. Instantiate(hitEffectPrefab, targetPosition) ‚Üê —ç—Ñ—Ñ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω! ‚ú®
7. Destroy(hitEffect, 2f) ‚Üê —ç—Ñ—Ñ–µ–∫—Ç —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 2 —Å–µ–∫
```

### –î–ª—è –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è (Mage/Archer/Rogue):

```
1. –ù–∞–∂–∞–ª–∏ –õ–ö–ú
2. TryAttack() ‚Üí PerformAttack()
3. –ß–µ—Ä–µ–∑ 0.3-0.5 —Å–µ–∫ ‚Üí DealDamage()
4. attackType == Ranged ‚Üí SpawnProjectile(damage)
5. –°–Ω–∞—Ä—è–¥ —Å–æ–∑–¥–∞—ë—Ç—Å—è
6. –°–Ω–∞—Ä—è–¥ –ª–µ—Ç–∏—Ç –∫ —Ü–µ–ª–∏
7. OnTriggerEnter ‚Üí HitTarget()
8. –°–Ω–∞—Ä—è–¥ —Å–æ–∑–¥–∞—ë—Ç —Å–≤–æ–π hitEffect (–∏–∑ —Å–Ω–∞—Ä—è–¥–∞)
```

**–†–∞–∑–Ω–∏—Ü–∞:**
- **–ë–ª–∏–∂–Ω–∏–π –±–æ–π** - —ç—Ñ—Ñ–µ–∫—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ `ApplyDamage()`
- **–î–∞–ª—å–Ω–∏–π –±–æ–π** - —ç—Ñ—Ñ–µ–∫—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ —Å–Ω–∞—Ä—è–¥–µ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Unity

### 2. –°–æ–∑–¥–∞–π—Ç–µ TestWarrior (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–ª–∏):

```
Hierarchy ‚Üí TestPlayer ‚Üí Duplicate ‚Üí Rename: "TestWarrior"
Inspector ‚Üí PlayerAttackNew ‚Üí Attack Config ‚Üí BasicAttackConfig_Warrior
```

### 3. –ù–∞–∂–º–∏—Ç–µ Play ‚ñ∂Ô∏è

### 4. –ü–æ–¥–æ–π–¥–∏—Ç–µ –ë–õ–ò–ó–ö–û –∫ DummyEnemy (<3.5–º)

### 5. –ù–∞–∂–º–∏—Ç–µ –õ–ö–ú –¥–ª—è –∞—Ç–∞–∫–∏

---

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

### –í–∏–∑—É–∞–ª—å–Ω–æ:

```
‚úÖ –í–æ–∏–Ω –∑–∞–º–∞—Ö–∏–≤–∞–µ—Ç—Å—è –º–µ—á–æ–º (–∞–Ω–∏–º–∞—Ü–∏—è)
‚úÖ –ß–µ—Ä–µ–∑ 0.5 —Å–µ–∫ —É–¥–∞—Ä!
‚úÖ –£—Ä–æ–Ω –Ω–∞–Ω–æ—Å–∏—Ç—Å—è (HP: 1000 ‚Üí 950)
‚úÖ –ù–∞ –≤—Ä–∞–≥–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ò–°–ö–†–´! ‚ö°‚ú® ‚Üê –ù–û–í–û–ï!
‚úÖ –ò—Å–∫—Ä—ã –∏—Å—á–µ–∑–∞—é—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
```

### –õ–æ–≥–∏ –≤ Console:

```
[PlayerAttackNew] ‚úÖ –í—ã–±—Ä–∞–Ω –±–ª–∏–∂–∞–π—à–∏–π: DummyEnemy_2 –Ω–∞ 3.2m
[PlayerAttackNew] ‚öîÔ∏è –ê—Ç–∞–∫–∞!
[PlayerAttackNew] üí• –£—Ä–æ–Ω —Ä–∞—Å—Å—á–∏—Ç–∞–Ω: 50.0
[PlayerAttackNew] ‚öîÔ∏è –£—Ä–æ–Ω 50.0 –Ω–∞–Ω–µ—Å—ë–Ω DummyEnemy
[PlayerAttackNew] üí• –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω: CFXR3 Hit Leaves A (Lit) ‚Üê –ù–û–í–û–ï!
[DummyEnemy] DummyEnemy_2 –ø–æ–ª—É—á–∏–ª 50.0 —É—Ä–æ–Ω–∞. HP: 950/1000
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ü–æ–∑–∏—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞:

```csharp
Vector3 hitPosition = targetTransform.position + Vector3.up * 1f;
```

–≠—Ñ—Ñ–µ–∫—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ **1 –º–µ—Ç—Ä –≤—ã—à–µ** —Ü–µ–Ω—Ç—Ä–∞ –≤—Ä–∞–≥–∞, —á—Ç–æ–±—ã –∏—Å–∫—Ä—ã –±—ã–ª–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–µ–ª–∞, –∞ –Ω–µ –Ω–∞ –∑–µ–º–ª–µ.

### –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞:

```csharp
Destroy(hitEffect, 2f);
```

–≠—Ñ—Ñ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ **2 —Å–µ–∫—É–Ω–¥—ã** –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞:

```csharp
if (targetTransform != null && attackConfig.hitEffectPrefab != null)
```

–≠—Ñ—Ñ–µ–∫—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
- ‚úÖ –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–ª—å (targetTransform)
- ‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω hitEffectPrefab –≤ –∫–æ–Ω—Ñ–∏–≥–µ

---

## –ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤:

–≠—Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç** –¥–ª—è Paladin (–∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–¥–∏—Ç–µ):

```
Paladin (Melee):
‚îú‚îÄ‚îÄ attackType = Melee
‚îú‚îÄ‚îÄ hitEffectPrefab = [–ª—é–±–æ–π —ç—Ñ—Ñ–µ–∫—Ç]
‚îî‚îÄ‚îÄ ApplyDamage() ‚Üí —Å–æ–∑–¥–∞—Å—Ç —ç—Ñ—Ñ–µ–∫—Ç ‚úÖ

–í—Å–µ –¥–∞–ª—å–Ω–∏–∫–∏ (Ranged):
‚îú‚îÄ‚îÄ attackType = Ranged
‚îú‚îÄ‚îÄ SpawnProjectile() ‚Üí —Å–Ω–∞—Ä—è–¥ —Å–æ–∑–¥–∞—ë—Ç—Å—è
‚îî‚îÄ‚îÄ –°–Ω–∞—Ä—è–¥ —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ ‚úÖ
```

---

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **BasicAttackConfig_Warrior.asset**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: `hitEffectPrefab: CFXR3 Hit Leaves A (Lit)`

2. **PlayerAttackNew.cs** (–º–µ—Ç–æ–¥ ApplyDamage, —Å—Ç—Ä–æ–∫–∏ 294-342)
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ targetTransform
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: –°–æ–∑–¥–∞–Ω–∏–µ hitEffect –¥–ª—è –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: Destroy(hitEffect, 2f)

---

## –°—Ç–∞—Ç—É—Å:

‚úÖ **Hit Effect –Ω–∞–∑–Ω–∞—á–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ**
‚úÖ **ApplyDamage —Å–æ–∑–¥–∞—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è**
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è Warrior**
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è Paladin**
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**

---

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!** –ü–æ–¥–æ–π–¥–∏—Ç–µ –∫ –≤—Ä–∞–≥—É –∏ –∞—Ç–∞–∫—É–π—Ç–µ - —É–≤–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–µ –∏—Å–∫—Ä—ã –æ—Ç —É–¥–∞—Ä–∞ –º–µ—á–∞! ‚öîÔ∏è‚ú®
