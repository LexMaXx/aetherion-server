# –°–∏—Å—Ç–µ–º–∞ —Ç—É–º–∞–Ω–∞ –≤–æ–π–Ω—ã (Fog of War)

## –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–∞–∫ –≤ RTS/MMO –∏–≥—Ä–∞—Ö:
- **–†–∞–¥–∏—É—Å –≤–∏–¥–∏–º–æ—Å—Ç–∏**: 60 –º–µ—Ç—Ä–æ–≤ –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
- **–í—Ä–∞–≥–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è** –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Ä–∞–¥–∏—É—Å–∞
- **–°—Ç—Ä–æ–µ–Ω–∏—è –∏ –¥–µ—Ä–µ–≤—å—è** –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏
- **–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—É–º–∞–Ω** –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Å–µ—Ä–æ-—Å–∏–Ω–∏–π

## –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

### 1. FogOfWar.cs (–Ω–æ–≤—ã–π)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `Assets/Scripts/Effects/FogOfWar.cs`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤ –≤ —Å—Ü–µ–Ω–µ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∏–≥—Ä–æ–∫–∞ –∫–∞–∂–¥—ã–µ 0.2 —Å–µ–∫—É–Ω–¥—ã
- –°–∫—Ä—ã–≤–∞–µ—Ç/–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–∞–≥–æ–≤ (Renderer + Collider)
- –í–∫–ª—é—á–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—É–º–∞–Ω Unity

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
```csharp
visibilityRadius = 60f     // –†–∞–¥–∏—É—Å –≤–∏–¥–∏–º–æ—Å—Ç–∏ (–º–µ—Ç—Ä—ã)
updateInterval = 0.2f      // –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–µ–∫—É–Ω–¥—ã)
enableVisualFog = true     // –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—É–º–∞–Ω
fogColor = (0.2, 0.2, 0.3, 0.3)  // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Å–µ—Ä–æ-—Å–∏–Ω–∏–π
fogDensity = 0.01f         // –ü–ª–æ—Ç–Ω–æ—Å—Ç—å —Ç—É–º–∞–Ω–∞
```

### 2. ArenaManager.cs (–æ–±–Ω–æ–≤–ª—ë–Ω)
**–õ–∏–Ω–∏—è 210-216**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ FogOfWar –Ω–∞ –∏–≥—Ä–æ–∫–∞

### 3. Enemy.cs (–æ–±–Ω–æ–≤–ª—ë–Ω)
**–õ–∏–Ω–∏—è 42-47**: –í—Ä–∞–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–ø–∞–≤–Ω–µ

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –õ–æ–≥–∏–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏

```
–í—Ä–∞–≥ —Å–ø–∞–≤–Ω–∏—Ç—Å—è ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ FogOfWar
‚Üì
–ö–∞–∂–¥—ã–µ 0.2 —Å–µ–∫—É–Ω–¥—ã:
  –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∏–≥—Ä–æ–∫–∞ <= 60–º ‚Üí –í—Ä–∞–≥ –í–ò–î–ò–ú
  –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∏–≥—Ä–æ–∫–∞ > 60–º  ‚Üí –í—Ä–∞–≥ –°–ö–†–´–¢
‚Üì
–°–∫—Ä—ã—Ç–∏–µ = Renderer.enabled = false + Collider.enabled = false
```

### –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—É–º–∞–Ω

Unity Fog Settings:
- **Mode**: Exponential
- **Color**: RGB(0.2, 0.2, 0.3) —Å –∞–ª—å—Ñ–æ–π 0.3
- **Density**: 0.01 (–ª—ë–≥–∫–∏–π —Ç—É–º–∞–Ω)

### –ß—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
- ‚úÖ **–í—Ä–∞–≥–∏** (Enemy –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- ‚ùå **–°—Ç—Ä–æ–µ–Ω–∏—è** (–æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏)
- ‚ùå **–î–µ—Ä–µ–≤—å—è** (–æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏)
- ‚ùå **Terrain** (–æ—Å—Ç–∞—ë—Ç—Å—è –≤–∏–¥–∏–º—ã–º)

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Update –∫–∞–∂–¥—ã–µ 0.2 —Å–µ–∫—É–Ω–¥—ã
–í–º–µ—Å—Ç–æ –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞ (60 FPS), –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç 5 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É:
```csharp
updateTimer += Time.deltaTime;
if (updateTimer >= 0.2f)
{
    UpdateEnemyVisibility(); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤
}
```

### –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ 2D (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–ª–æ—Å–∫–æ—Å—Ç—å)
–ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –≤—ã—Å–æ—Ç—É (Y) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:
```csharp
playerPos.y = 0;
enemyPos.y = 0;
float distance = Vector3.Distance(playerPos, enemyPos);
```

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

Gizmos –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–¥–∏—É—Å –≤–∏–¥–∏–º–æ—Å—Ç–∏:
- **–ó–µ–ª–µ–Ω—ã–π –∫—Ä—É–≥** (–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π) - –∑–æ–Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏
- **–ñ–µ–ª—Ç–∞—è –ª–∏–Ω–∏—è** - –≥—Ä–∞–Ω–∏—Ü–∞ 60 –º–µ—Ç—Ä–æ–≤

## Debug –ª–æ–≥–∏

```
[FogOfWar] üå´Ô∏è –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—É–º–∞–Ω –≤–∫–ª—é—á–µ–Ω
[FogOfWar] –°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –†–∞–¥–∏—É—Å –≤–∏–¥–∏–º–æ—Å—Ç–∏: 60–º
[FogOfWar] –ù–∞–π–¥–µ–Ω–æ –≤—Ä–∞–≥–æ–≤: 5
[FogOfWar] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π –≤—Ä–∞–≥: Orc
[FogOfWar] –í—Ä–∞–≥ —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞: Skeleton
```

## API

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Ä–∞–≥–æ–≤
```csharp
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Enemy.Start()
FogOfWar fogOfWar = FindObjectOfType<FogOfWar>();
fogOfWar.RegisterEnemy(this);
```

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```csharp
// –ï—Å–ª–∏ –≤—Ä–∞–≥–∏ —Å–ø–∞–≤–Ω—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
fogOfWar.RefreshEnemies(); // –ü–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ü–µ–Ω—É
```

### –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–∞–≥–∞
```csharp
// –ü—Ä–∏ —Å–º–µ—Ä—Ç–∏
fogOfWar.UnregisterEnemy(this);
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–¥–∏—É—Å –∏–ª–∏ —Ç—É–º–∞–Ω:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ü–µ–Ω—É Arena –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –ù–∞–π–¥–∏—Ç–µ –∏–≥—Ä–æ–∫–∞ ‚Üí FogOfWar –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
3. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ Inspector:

**Visibility Settings:**
- **Visibility Radius**: 60 (–º–æ–∂–Ω–æ 30-100)
- **Update Interval**: 0.2 (–º–æ–∂–Ω–æ 0.1-0.5)

**Fog Visual:**
- **Enable Visual Fog**: true/false
- **Fog Color**: –¶–≤–µ—Ç —Ç—É–º–∞–Ω–∞
- **Fog Density**: 0.01 (0.005-0.02)

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–∞–≥–∏**: FindObjectOfType —Ç–æ–ª—å–∫–æ –≤ Start()
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 5 —Ä–∞–∑/—Å–µ–∫ –≤–º–µ—Å—Ç–æ 60
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –°–∫—Ä—ã—Ç–∏–µ Collider —ç–∫–æ–Ω–æ–º–∏—Ç Physics —Ä–∞—Å—á—ë—Ç—ã

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–¥–∏—É—Å –¥–æ 100–º
```csharp
visibilityRadius = 100f;
```

### –°–¥–µ–ª–∞—Ç—å —Ç—É–º–∞–Ω –≥—É—â–µ
```csharp
fogDensity = 0.02f;
```

### –û—Ç–∫–ª—é—á–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—É–º–∞–Ω
```csharp
enableVisualFog = false;
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç —Ç—É–º–∞–Ω–∞ (–∫—Ä–∞—Å–Ω—ã–π)
```csharp
fogColor = new Color(0.5f, 0.2f, 0.2f, 0.3f);
```

## –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è Arena** ‚Üí FogOfWar –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –∏–≥—Ä–æ–∫–∞
2. **–í—Ä–∞–≥–∏ —Å–ø–∞–≤–Ω—è—Ç—Å—è** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è
3. **–ò–≥—Ä–æ–∫ –¥–≤–∏–∂–µ—Ç—Å—è** ‚Üí –í—Ä–∞–≥–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è/–ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
4. **–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—É–º–∞–Ω** ‚Üí –õ—ë–≥–∫–∞—è –¥—ã–º–∫–∞ –ø–æ –≤—Å–µ–π —Å—Ü–µ–Ω–µ

–≠—Ñ—Ñ–µ–∫—Ç –∫–∞–∫ –≤ Warcraft 3 / Lineage 2 - —Ç—É–º–∞–Ω –≤–æ–π–Ω—ã —Å–∫—Ä—ã–≤–∞–µ—Ç –≤—Ä–∞–≥–æ–≤! üå´Ô∏è
