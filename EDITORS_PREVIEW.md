# Preview: Редакторы и Тестовая Сцена

## 1. BasicAttackConfig Editor (Custom Inspector)

### Как открыть:
1. Unity → Project → `Assets/ScriptableObjects/Skills/BasicAttackConfig_Mage.asset`
2. Выбрать asset
3. Inspector покажет кастомный редактор

### Внешний вид Inspector:

```
╔════════════════════════════════════════════════════════════╗
║  BasicAttackConfig_Mage                                    ║
╠════════════════════════════════════════════════════════════╣
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ 📊 БАЗОВАЯ ИНФОРМАЦИЯ                                │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Character Class:     [Mage           ▼]             │ ║
║  │ Attack Type:         [Ranged         ▼]             │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ 💥 УРОН И СКЕЙЛИНГ                                   │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Base Damage:         [40.0        ]                 │ ║
║  │ Strength Scaling:    [0.0         ] (x STR)         │ ║
║  │ Intelligence Scaling:[2.0         ] (x INT)         │ ║
║  │                                                      │ ║
║  │ 📈 ПРЕВЬЮ УРОНА:                                     │ ║
║  │ ┌────────────────────────────────────────────────┐  │ ║
║  │ │ С STR=10, INT=10:                              │  │ ║
║  │ │ 40 + (0.0 × 10) + (2.0 × 10) = 60.0 урона      │  │ ║
║  │ └────────────────────────────────────────────────┘  │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ ⚡ СКОРОСТЬ АТАКИ                                    │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Attack Cooldown:     [1.0         ] сек             │ ║
║  │ Attack Range:        [20.0        ] метров          │ ║
║  │                                                      │ ║
║  │ 📊 DPS: 60.0 урона/сек                               │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ 🎯 НАСТРОЙКИ СНАРЯДА                                 │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Projectile Prefab:   [CelestialBallProjectile]     │ ║
║  │                      [▣ Preview Icon ]               │ ║
║  │ Projectile Speed:    [20.0        ] м/с             │ ║
║  │ Projectile Lifetime: [5.0         ] сек             │ ║
║  │ ☑ Projectile Homing                                 │ ║
║  │   Homing Speed:      [10.0        ] м/с             │ ║
║  │   Homing Radius:     [30.0        ] метров          │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ ✨ ВИЗУАЛЬНЫЕ ЭФФЕКТЫ                                │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Hit Effect Prefab:   [None                ]         │ ║
║  │ Weapon Effect Prefab:[None                ]         │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ 🔊 ЗВУКИ                                             │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Attack Sound:        [None                ]         │ ║
║  │ Hit Sound:           [None                ]         │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ 🎬 АНИМАЦИЯ                                          │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Animation Trigger:   [Attack      ]                 │ ║
║  │ Animation Speed:     [3.0         ]x                │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ 💎 РАСХОД РЕСУРСОВ                                   │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ Mana Cost Per Attack:[10.0        ]                 │ ║
║  │ Action Points Cost:  [1.0         ]                 │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │ 🔥 ЭФФЕКТЫ ПРИ ПОПАДАНИИ                             │ ║
║  ├──────────────────────────────────────────────────────┤ ║
║  │ On Hit Effects:      List is Empty                  │ ║
║  │                      [+ Add Effect]                  │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
║  ┌──────────────────────────────────────────────────────┐ ║
║  │              [🔍 ПРОВЕРИТЬ КОНФИГУРАЦИЮ]             │ ║
║  │              [🐛 ВЫВЕСТИ DEBUG INFO]                 │ ║
║  └──────────────────────────────────────────────────────┘ ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

### Особенности:

1. **Цветные заголовки секций:**
   - Синий для основной информации
   - Красный для урона
   - Желтый для скорости
   - Зеленый для снарядов
   - И т.д.

2. **Интерактивный превью урона:**
   - Показывает формулу расчета
   - Пример с STR=10, INT=10
   - Автоматический расчет итогового урона

3. **DPS калькулятор:**
   - `DPS = Damage / Cooldown`
   - Обновляется автоматически

4. **Asset Preview:**
   - Показывает иконку префаба снаряда
   - Если префаб не назначен - предупреждение

5. **Условная UI:**
   - Секция "Настройки снаряда" только для Ranged
   - Homing настройки только если homing включен

6. **Валидация:**
   - Кнопка проверки конфигурации
   - Выводит ошибки в Console
   - Предупреждения в Inspector

---

## 2. Создание Тестовой Сцены

### Как создать:
1. Unity Editor → Menu → `Aetherion` → `Create Skill Test Scene`
2. Откроется окно:

```
╔═══════════════════════════════════════════════════════╗
║  Skill Test Scene Creator                             ║
╠═══════════════════════════════════════════════════════╣
║                                                       ║
║  Создание тестовой сцены                              ║
║                                                       ║
║  Название сцены:       [SkillTestScene          ]    ║
║                                                       ║
║  Количество врагов:    [━━━●━━━━━━] 5                ║
║                                                       ║
║  Расстояние между      [━━━━━●━━━━] 3.0 м            ║
║  врагами:                                             ║
║                                                       ║
║  ┌───────────────────────────────────────────────┐   ║
║  │                                               │   ║
║  │      [Создать тестовую сцену]                │   ║
║  │                                               │   ║
║  └───────────────────────────────────────────────┘   ║
║                                                       ║
║  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓   ║
║  ┃ ℹ️ Эта утилита создаст:                      ┃   ║
║  ┃ • Новую сцену для тестирования               ┃   ║
║  ┃ • Арену с землей                             ┃   ║
║  ┃ • Точку спавна игрока                        ┃   ║
║  ┃ • Dummy-врагов для тестирования атак         ┃   ║
║  ┃ • Камеру и освещение                         ┃   ║
║  ┃ • UI для тестирования                        ┃   ║
║  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛   ║
║                                                       ║
╚═══════════════════════════════════════════════════════╝
```

---

## 3. Визуализация SkillTestScene

### После создания сцены в Unity Editor:

```
╔═══════════════════════════════════════════════════════════════════════╗
║  Scene View: SkillTestScene                                           ║
╠═══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║                       ┌─ Main Camera ─┐                               ║
║                       │  (Y: 15, Z: -15)                              ║
║                       │  Looking down 45°                             ║
║                       └────────────────┘                              ║
║                              ↓                                        ║
║  ┌───────────────────────────────────────────────────────────┐       ║
║  │                                                           │       ║
║  │                    🔆 Directional Light                   │       ║
║  │                                                           │       ║
║  │                                                           │       ║
║  │        🔴     🔴     🔴     🔴     🔴                     │       ║
║  │       Dummy  Dummy  Dummy  Dummy  Dummy                  │       ║
║  │        1      2      3      4      5                      │       ║
║  │      (З: 5m)                                              │       ║
║  │                                                           │       ║
║  │                                                           │       ║
║  │                      🟢                                    │       ║
║  │                PlayerSpawnPoint                           │       ║
║  │                   (З: -10m)                               │       ║
║  │                                                           │       ║
║  │═══════════════════════════════════════════════════════════│       ║
║  │                  ArenaFloor (50x50m)                      │       ║
║  └───────────────────────────────────────────────────────────┘       ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

### Иерархия сцены:

```
📁 SkillTestScene
├── 📷 Main Camera
├── ☀️ Directional Light
├── 🟫 ArenaFloor (Plane 50x50)
├── 🟢 PlayerSpawnPoint
│   └── 🎯 SpawnMarker (Cylinder, зеленый)
├── 📂 DummyEnemies
│   ├── 🔴 DummyEnemy_1
│   │   ├── Visual (Cylinder, красный)
│   │   └── HPBarCanvas
│   │       ├── Background (черный)
│   │       ├── HPSlider (зеленый)
│   │       └── HPText
│   ├── 🔴 DummyEnemy_2
│   ├── 🔴 DummyEnemy_3
│   ├── 🔴 DummyEnemy_4
│   └── 🔴 DummyEnemy_5
└── 📺 TestUI (Canvas)
    └── InstructionsPanel
        └── InstructionsText
```

---

## 4. Game View с UI

### При запуске тестовой сцены:

```
╔═══════════════════════════════════════════════════════════════════╗
║ Game View (1920x1080)                                             ║
╠═══════════════════════════════════════════════════════════════════╣
║                                                                   ║
║  ┌────────────────────────────────────────┐                      ║
║  │ SKILL TEST SCENE                       │                      ║
║  │                                        │                      ║
║  │ 1. Перетащите префаб игрока на        │                      ║
║  │    PlayerSpawnPoint                    │                      ║
║  │ 2. Назначьте BasicAttackConfig в       │                      ║
║  │    PlayerAttack                        │                      ║
║  │ 3. Нажмите Play                        │                      ║
║  │ 4. Атакуйте dummy врагов для теста    │                      ║
║  │                                        │                      ║
║  │ Dummy враги: простые столбики с HP     │                      ║
║  │ Используйте Console для логов урона    │                      ║
║  └────────────────────────────────────────┘                      ║
║                                                                   ║
║                                                                   ║
║                    1000/1000  1000/1000  1000/1000               ║
║                       🔴         🔴         🔴                    ║
║                     Dummy1     Dummy2    Dummy3                  ║
║                         ▐▌        ▐▌        ▐▌                   ║
║                         ▐▌        ▐▌        ▐▌                   ║
║                         ▐▌        ▐▌        ▐▌                   ║
║                                                                   ║
║                                                                   ║
║                          🧙 Player                                ║
║                                                                   ║
║                                                                   ║
║                                                                   ║
╚═══════════════════════════════════════════════════════════════════╝
```

---

## 5. DummyEnemy Inspector

### При выборе DummyEnemy в Scene:

```
╔═══════════════════════════════════════════════════════╗
║  Inspector: DummyEnemy_1                              ║
╠═══════════════════════════════════════════════════════╣
║                                                       ║
║  Transform                                            ║
║    Position: (0, 0.1, 5)                              ║
║    Rotation: (0, 0, 0)                                ║
║    Scale:    (1, 1, 1)                                ║
║                                                       ║
║  ─────────────────────────────────────────────────    ║
║                                                       ║
║  Dummy Enemy (Script)                                 ║
║                                                       ║
║    Health Settings                                    ║
║      Max Health:       [1000        ]                 ║
║      ☑ Auto Respawn                                  ║
║      Respawn Delay:    [3.0         ] сек             ║
║                                                       ║
║    Visual Feedback                                    ║
║      Normal Color:     [████] (0.8, 0.2, 0.2)        ║
║      Damage Color:     [████] White                  ║
║      Damage Flash:     [0.1         ] сек             ║
║                                                       ║
║    UI                                                 ║
║      HP Bar Prefab:    [None                ]        ║
║      HP Bar Offset:    (0, 2.5, 0)                    ║
║                                                       ║
║  ─────────────────────────────────────────────────    ║
║                                                       ║
║  Capsule Collider                                     ║
║    Center:  (0, 1, 0)                                 ║
║    Radius:  0.5                                       ║
║    Height:  2                                         ║
║                                                       ║
║  ─────────────────────────────────────────────────    ║
║                                                       ║
║  🏷️ Tag: Enemy                                        ║
║  🧩 Layer: Default                                    ║
║                                                       ║
╚═══════════════════════════════════════════════════════╝
```

---

## 6. Как тестировать

### Шаг 1: Подготовка
```bash
1. Создайте SkillTestScene через меню Aetherion
2. Откройте сцену
3. Перетащите префаб Мага в сцену на PlayerSpawnPoint
```

### Шаг 2: Настройка атаки
```bash
1. Выберите префаб Мага
2. Найдите компонент PlayerAttack
3. В поле "Attack Config" перетащите BasicAttackConfig_Mage.asset
```

### Шаг 3: Запуск
```bash
1. Нажмите Play
2. Используйте Tab для выбора врага
3. Кликните ЛКМ для атаки
```

### Шаг 4: Проверка результата
```bash
Console покажет:
[PlayerAttack] ✅ Используется BasicAttackConfig: BasicAttackConfig_Mage
[PlayerAttack] 💥 Урон рассчитан через BasicAttackConfig: 60
[PlayerAttack] 🎯 Снаряд создан для DummyEnemy_1
[DummyEnemy] DummyEnemy_1 получил 60.0 урона. HP: 940/1000
```

### HP Bar обновится:
```
До атаки:  [████████████████████] 1000/1000
После:     [██████████████████░░] 940/1000
```

---

## 7. Преимущества нового редактора

### Удобство:
✅ Все параметры в одном месте
✅ Организованные секции (не нужно скроллить)
✅ Цветовое кодирование
✅ Превью урона и DPS

### Валидация:
✅ Автоматические предупреждения
✅ Кнопка проверки конфигурации
✅ Debug info в Console

### Визуализация:
✅ Asset Preview для префабов
✅ Формулы расчета урона
✅ Понятные подсказки (tooltips)

### Расширяемость:
✅ Легко добавить новые параметры
✅ Легко создать конфиги для новых классов
✅ ScriptableObject = переиспользование

---

## Следующий шаг

Теперь нужно:
1. ✅ Создать тестовую сцену
2. ✅ Назначить BasicAttackConfig_Mage
3. ✅ Протестировать атаку Мага
4. ⏳ Убедиться что урон работает
5. ⏳ Создать конфиги для остальных классов
