# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Projectile Effects –¥–ª—è Curse of Weakness

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `Curse of Weakness` —Å–Ω–∞—Ä—è–¥ –ø–æ–ø–∞–¥–∞–ª –≤ —Ü–µ–ª—å –∏ –Ω–∞–Ω–æ—Å–∏–ª —É—Ä–æ–Ω, –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç `DecreasePerception` –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª—Å—è.

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏:**
```
[Projectile] ‚ö†Ô∏è –ù–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
```

## –ü—Ä–∏—á–∏–Ω—ã

### 1. DummyEnemy –Ω–µ –∏–º–µ–ª CharacterStats
- `DecreasePerception` —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `CharacterStats.SetPerception()`
- DummyEnemy –Ω–µ –∏–º–µ–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `CharacterStats`
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç CharacterStats –≤ `DummyEnemy.Start()`

### 2. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–≤—É—Ö —Å–∏—Å—Ç–µ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

**–°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ (SkillEffect):**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `Projectile.cs` ‚Üí `ApplyEffects()` ‚Üí `SkillManager`
- –†–∞–±–æ—Ç–∞–µ—Ç —Å `List<SkillEffect>`

**–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (EffectConfig):**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `ProjectileEffectApplier` ‚Üí `ApplyEffectsToTarget()` ‚Üí `EffectManager`
- –†–∞–±–æ—Ç–∞–µ—Ç —Å `List<EffectConfig>`

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ –æ–¥–Ω–æ–º GameObject –ø—ã—Ç–∞–ª–∏—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã, –Ω–æ —Å—Ç–∞—Ä—ã–π `Projectile` –Ω–µ –≤–∏–¥–µ–ª –Ω–æ–≤—ã–µ `EffectConfig` –∏ –≤—ã–¥–∞–≤–∞–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. DummyEnemy.cs (Lines 68-75)
–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è CharacterStats:

```csharp
// –î–æ–±–∞–≤–ª—è–µ–º CharacterStats –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
if (GetComponent<CharacterStats>() == null)
{
    CharacterStats stats = gameObject.AddComponent<CharacterStats>();
    stats.perception = 5; // –°—Ä–µ–¥–Ω–µ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ
    Debug.Log($"[DummyEnemy] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω CharacterStats –Ω–∞ {gameObject.name} (Perception: {stats.perception})");
}
```

### 2. Projectile.cs (Lines 162-170, 177-187)
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `ProjectileEffectApplier`:

```csharp
// –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç ProjectileEffectApplier (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
if (GetComponent<ProjectileEffectApplier>() == null)
{
    // –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞: SkillEffect —á–µ—Ä–µ–∑ SkillManager
    ApplyEffects(target);
}
else
{
    Debug.Log($"[Projectile] ‚è≠Ô∏è ProjectileEffectApplier –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)");
}
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ –µ—Å—Ç—å `ProjectileEffectApplier` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (EffectConfig + EffectManager)
- –ï—Å–ª–∏ –Ω–µ—Ç `ProjectileEffectApplier` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ (SkillEffect + SkillManager)
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤

### 3. AddCharacterStatsToDummies.cs (Editor Utility)
–°–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è CharacterStats –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º DummyEnemy:

```
Unity Menu ‚Üí Aetherion ‚Üí Utilities ‚Üí Add CharacterStats to All DummyEnemies
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

### –ó–∞–ø—É—Å–∫ Curse of Weakness:

**1. SkillExecutor —Å–æ–∑–¥–∞—ë—Ç —Å–Ω–∞—Ä—è–¥:**
```csharp
GameObject projectile = Instantiate(skill.projectilePrefab, ...);
Projectile oldProj = projectile.GetComponent<Projectile>();
oldProj.Initialize(target, damage, direction, gameObject, null);

// –î–æ–±–∞–≤–ª—è–µ–º ProjectileEffectApplier –¥–ª—è –Ω–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
ProjectileEffectApplier effectApplier = projectile.AddComponent<ProjectileEffectApplier>();
effectApplier.Initialize(skill.effects, stats); // List<EffectConfig>
```

**2. –°–Ω–∞—Ä—è–¥ –ª–µ—Ç–∏—Ç –∫ —Ü–µ–ª–∏**

**3. –ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ DummyEnemy:**

**Projectile.HitTarget():**
```
1. TakeDamage() - –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ ProjectileEffectApplier
3. –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç ApplyEffects() (—Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞)
4. –õ–æ–≥–∏—Ä—É–µ—Ç: "‚è≠Ô∏è ProjectileEffectApplier –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã"
```

**ProjectileEffectApplier.OnTriggerEnter():**
```
1. –ü–æ–ª—É—á–∞–µ—Ç EffectManager —Ü–µ–ª–∏ (–∏–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç)
2. –ü—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ EffectConfig —á–µ—Ä–µ–∑ EffectManager.ApplyEffect()
3. EffectManager ‚Üí CharacterStats.SetPerception(1)
4. –õ–æ–≥–∏—Ä—É–µ—Ç: "‚ú® Applied effect DecreasePerception to DummyEnemy_5"
```

## –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
[SkillExecutor] Using skill: Curse of Weakness
[SkillExecutor] Damage calculated: 24,5 (base: 20)
[Projectile] üé® Hit effect —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: CFXR3 Hit Electric C (Air)
[SkillExecutor] Old Projectile launched: 24,5 damage
[ProjectileEffectApplier] Initialized with 1 effects

[DummyEnemy] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω CharacterStats –Ω–∞ DummyEnemy_5 (Perception: 5)

[DummyEnemy] DummyEnemy_5 –ø–æ–ª—É—á–∏–ª 24,5 —É—Ä–æ–Ω–∞. HP: 976/1000
[Projectile] –ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ DummyEnemy! –£—Ä–æ–Ω: 24,5
[Projectile] ‚è≠Ô∏è ProjectileEffectApplier –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)

[ProjectileEffectApplier] ‚ú® Applied effect DecreasePerception to DummyEnemy_5
[CharacterStats] üíæ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Perception —Å–æ—Ö—Ä–∞–Ω—ë–Ω: 5
[CharacterStats] üëÅÔ∏è Perception —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ 1 (–±—ã–ª–æ: 5, visionRadius: 5–º)
[EffectManager] üëÅÔ∏èüîª Perception —Å–Ω–∏–∂–µ–Ω –¥–æ 1 (–ø—Ä–æ–∫–ª—è—Ç–∏–µ)
[EffectManager] ‚ú® –ü—Ä–∏–º–µ–Ω—ë–Ω —ç—Ñ—Ñ–µ–∫—Ç: DecreasePerception (10—Å)
[ProjectileEffectApplier] ‚úÖ Applied 1 effects to DummyEnemy_5
```

### –ß–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥:

```
[CharacterStats] üîÑ Perception –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: 5 (visionRadius: 15–º)
[EffectManager] üîö –°–Ω—è—Ç —ç—Ñ—Ñ–µ–∫—Ç: DecreasePerception
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. **[Assets/Scripts/Arena/DummyEnemy.cs](Assets/Scripts/Arena/DummyEnemy.cs#L68-L75)** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ CharacterStats
2. **[Assets/Scripts/Player/Projectile.cs](Assets/Scripts/Player/Projectile.cs#L162-L170)** - –ü—Ä–æ–≤–µ—Ä–∫–∞ ProjectileEffectApplier
3. **[Assets/Scripts/Editor/AddCharacterStatsToDummies.cs](Assets/Scripts/Editor/AddCharacterStatsToDummies.cs)** - –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö DummyEnemy (—Å–æ–∑–¥–∞–Ω)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç:

1. **–î–æ–±–∞–≤–∏—Ç—å CharacterStats –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º DummyEnemy:**
   ```
   Unity Menu ‚Üí Aetherion ‚Üí Utilities ‚Üí Add CharacterStats to All DummyEnemies
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ü–µ–Ω—É:**
   ```
   ‚ñ∂Ô∏è Play Scene
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Curse of Weakness:**
   ```
   –ü—Ä–∏—Ü–µ–ª–∏—Ç—å—Å—è –Ω–∞ DummyEnemy
   –ù–∞–∂–∞—Ç—å –∫–ª–∞–≤–∏—à—É "2" (–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π hotkey)
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–æ–≥ `[Projectile] ‚è≠Ô∏è ProjectileEffectApplier –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã`
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–æ–≥ `[ProjectileEffectApplier] ‚ú® Applied effect DecreasePerception`
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–æ–≥ `[CharacterStats] üëÅÔ∏è Perception —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ 1`

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Inspector –≤—Ä–∞–≥–∞:**
   ```
   CharacterStats ‚Üí Perception: 1 (–±—ã–ª–æ 5)
   EffectManager ‚Üí Active Effects: DecreasePerception
   ```

6. **–ü–æ–¥–æ–∂–¥–∞—Ç—å 10 —Å–µ–∫—É–Ω–¥:**
   ```
   Perception –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ 5
   ```

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

Curse of Weakness —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç `DecreasePerception` –∫ –≤—Ä–∞–≥–∞–º! üëÅÔ∏èüîªüíÄ
